============================= test session starts ==============================
platform darwin -- Python 3.14.3, pytest-9.0.2, pluggy-1.6.0 -- /opt/homebrew/opt/python@3.14/bin/python3.14
cachedir: .pytest_cache
rootdir: /Users/martinhorak/Projects/cez-pnd
plugins: asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 30 items

tests/test_mqtt_discovery.py::TestSensorDefinitions::test_all_three_metrics_defined PASSED [  3%]
tests/test_mqtt_discovery.py::TestSensorDefinitions::test_each_sensor_has_unit PASSED [  6%]
tests/test_mqtt_discovery.py::TestSensorDefinitions::test_each_sensor_has_name PASSED [ 10%]
tests/test_mqtt_discovery.py::TestSensorDefinitions::test_each_sensor_has_device_class PASSED [ 13%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_unique_id_present PASSED [ 16%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_name_present PASSED [ 20%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_state_topic_present PASSED [ 23%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_unit_of_measurement_present PASSED [ 26%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_device_class_present PASSED [ 30%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_state_class_present PASSED [ 33%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_device_block_present PASSED [ 36%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_availability_topic_present PASSED [ 40%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_payload_is_valid_json_serializable PASSED [ 43%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_reactive_sensor_uses_var_unit PASSED [ 46%]
tests/test_mqtt_discovery.py::TestDiscoveryPayload::test_production_sensor_config PASSED [ 50%]
tests/test_mqtt_discovery.py::TestTopicNaming::test_config_topic_format PASSED [ 53%]
tests/test_mqtt_discovery.py::TestTopicNaming::test_state_topic_format PASSED [ 56%]
tests/test_mqtt_discovery.py::TestTopicNaming::test_availability_topic_format PASSED [ 60%]
tests/test_mqtt_discovery.py::TestTopicNaming::test_topics_are_deterministic_across_runs PASSED [ 63%]
tests/test_mqtt_discovery.py::TestAvailability::test_publisher_sets_lwt_on_connect PASSED [ 66%]
tests/test_mqtt_discovery.py::TestAvailability::test_publisher_publishes_online_after_connect PASSED [ 70%]
tests/test_mqtt_discovery.py::TestAvailability::test_stop_publishes_offline PASSED [ 73%]
tests/test_mqtt_discovery.py::TestDiscoveryPublishing::test_publishes_all_sensor_configs PASSED [ 76%]
tests/test_mqtt_discovery.py::TestDiscoveryPublishing::test_discovery_payload_is_retained PASSED [ 80%]
tests/test_mqtt_discovery.py::TestDiscoveryPublishing::test_discovery_payload_json_valid PASSED [ 83%]
tests/test_mqtt_discovery.py::TestStatePublishing::test_publish_state_sends_numeric_values PASSED [ 86%]
tests/test_mqtt_discovery.py::TestStatePublishing::test_publish_state_retains_values PASSED [ 90%]
tests/test_mqtt_discovery.py::TestStatePublishing::test_publish_state_ignores_unknown_keys PASSED [ 93%]
tests/test_mqtt_discovery.py::TestStatePublishing::test_publish_state_handles_none_values PASSED [ 96%]
tests/test_mqtt_discovery.py::TestStatePublishing::test_full_cycle_discovery_then_state PASSED [100%]

============================== 30 passed in 0.03s ==============================
